# nmap

### 静态编译

版本：nmap-7.40 、openssl-1.0.2j

```sh
CC='/usr/local/musl/bin/musl-gcc -static' ./Configure no-pic no-shared linux-x86_64

make
```

nmap 编译命令
```sh
CC="gcc -static -DLUA_C89_NUMBERS" \
CXX="g++ -static -static-libstdc++ -DLUA_C89_NUMBERS" \
LD=ld \
LDFLAGS="-L$basedir/build/openssl-${openssl_version}" \
./configure \
	-q \
	--without-ndiff \
	--without-zenmap \
	--without-nping \
	--without-ncat \
	--without-nmap-update \
	--with-pcap=linux \
	--with-openssl="$basedir/build/openssl-${openssl_version}" \
	--prefix "$basedir/output/nmap/"

# Don't build the libpcap.so file
sed -i -e 's/shared\: /shared\: #/' libpcap/Makefile

make -j4
strip nmap
make install
```

参考资料：

static-compile-scripts

https://github.com/CaledoniaProject/static-compile-scripts